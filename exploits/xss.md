# Stored XSS in Notes

## Summary
A stored cross-site scripting (XSS) vulnerability exists in the Notes feature due to unsafe rendering of user-controlled content.

## Affected Endpoint(s)
- POST /notes (stores note content)
- GET /notes (renders note content)

## Root Cause
The template renders note content using `| safe`, which disables HTML escaping:
- `{{ n["content"] | safe }}`

## Proof of Concept (PoC)
Create a note with:

```html
<script>
fetch("/xss-collect?d=" + encodeURIComponent("xss-fired|" + document.domain));
</script>
```

## Impact
An attacker can execute JavaScript in the victim's browser when they view `/notes`.
- Can lead to session hijacking
- Account actions preformed as the victim
- Data theft / phishing / content manipulation

## Severity
High (Stored XSS)

## Recommended Fix
Remove `| safe` and rely on default escaping
Encode output properly
Add defense-in-depth:
- Content Security Policy
- HttpOnly cookies for session
- Input validation / sanitization where appropriate
